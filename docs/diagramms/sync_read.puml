@startuml SyncRead
title OKW Sync-Strategie (Read: Verify*/Memorize*/Log*)

actor Test
participant "WidgetKeywords\n(Verify*/Memorize/Log)" as KW
participant "BaseWidget\n(_wait_before 'read')" as BW
participant "Adapter\n(SeleniumWebAdapter)" as AD
participant "Browser/DOM" as DOM

Test -> KW: VerifyValue/Verify... (Name, expected)
KW -> BW: resolve_widget(name)
KW -> BW: _wait_before('read')
...
BW -> AD: element_exists(locator)
AD -> DOM: query element
AD --> BW: True/False
opt visible (if configured)
  BW -> AD: wait_until_visible(locator, timeout)
end

== value wait loop ==
loop until verify-timeout
  KW -> BW: read current value/text/attr
  BW -> AD: get_value/get_text/get_attribute/...
  AD --> BW: actual
  alt matches expected (Exact/WCM/REGX)
    KW --> Test: pass
    break
  end
end
alt timeout
  KW --> Test: fail with last seen value
end

note right of KW
Verify-Timeouts:
- ${OKW_TIMEOUT_VERIFY_VALUE}
- ${OKW_TIMEOUT_VERIFY_PLACEHOLDER}
- ${OKW_TIMEOUT_VERIFY_TOOLTIP}
- ${OKW_TIMEOUT_VERIFY_LABEL}
- ${OKW_TIMEOUT_VERIFY_CAPTION}
- ${OKW_TIMEOUT_VERIFY_ATTRIBUTE}
Instance (YAML): wait.read {...}
end note

@enduml
